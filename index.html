<!DOCTYPE html> <!-- HTML5 æ–‡ä»¶å®£å‘Š -->
<html lang="zh-Hant"> <!-- é é¢èªç³»ï¼šç¹é«”ä¸­æ–‡ -->
<head> <!-- æ–‡ä»¶é ­é–‹å§‹ -->
  <meta charset="UTF-8"> <!-- ç·¨ç¢¼ UTF-8ï¼Œé¿å…äº‚ç¢¼ -->
  <meta name="viewport" content="width=device-width,initial-scale=1"> <!-- RWD è¦–çª—è¨­å®š -->
  <title>Anastasia</title> <!-- ç€è¦½å™¨åˆ†é æ¨™é¡Œ -->

  <style> /* ====== å…¨ç«™åŸºæœ¬æ¨£å¼ ====== */
    body{margin:0; font-family:"Microsoft JhengHei",sans-serif; background:#f9f9f6; color:#333} /* æ–‡å­—è‰² */
    header{position:fixed; top:0;left:0;width:100%; background:#212121; padding:1rem 2rem; color:#fff; display:flex;align-items:center;justify-content:space-between;} 
    header h1{margin:0; font-size:2rem; color:#fff;} /* æ¨™é¡Œå¤§å° */
    nav{display:flex; gap:1.5rem;} 
    nav a{color:#fff; text-decoration:none; font-weight:bold; white-space:nowrap;} 
    nav a:hover{text-decoration:underline;} 
    .hero-gallery{display:grid; grid-template-columns:repeat(auto-fit,minmax(100%,1fr)); grid-auto-rows:50vh; width:100vw; margin-top:64px;} 
    .hero-gallery img{width:100%;height:100%; object-fit:cover; display:block;} 
    .hero-title{text-align:center; padding:2rem 1rem; font-size:3rem; color:#6fb1a0; font-weight:bold; font-family:'Segoe Script',cursive;}
    .content-wrapper{background:#f9f9f6; padding:2rem 1rem; display:flex;justify-content:center;} 
    main{max-width:1000px; width:100%;} 
    .tags{text-align:center; margin-bottom:2rem;} 
    .tags button{background:#fff; border:2px solid #6fb1a0; color:#6fb1a0; padding:.5rem 1.2rem; margin:.4rem; border-radius:25px; cursor:pointer; font-size:1rem;} 
    .tags button:hover{background:#6fb1a0;color:#fff;} 
    .posts{column-count:3; column-gap:1.5rem;} 
    @media (max-width:1024px){.posts{column-count:2}} 
    @media (max-width:600px){.posts{column-count:1}} 
    .card{background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,.1); text-decoration:none; color:inherit; transition:transform .3s ease; display:inline-block; width:100%; margin-bottom:1.5rem; break-inside:avoid; position:relative;} 
    .card:hover{transform:translateY(-5px);} 
    .card img{width:100%;height:320px; object-fit:cover; display:block;} 
    .card-content{padding:1rem;} 
    .card-content h2{margin:0 0 .5rem; color:#6fb1a0; font-size:1.4rem;} 
    .card-content .date{font-size:.9rem; color:#999; margin-bottom:.5rem;} 
    .card-content p{margin:0; line-height:1.6; color:#555;} 
    .card-meta{border-top:1px solid #ccc; margin-top:1rem; padding-top:.8rem; padding-left:.5rem;padding-right:.5rem; display:flex;justify-content:space-between;align-items:center; font-size:.9rem;color:#999;} 
    .like-btn{background:none; border:none; color:red; cursor:pointer; font-size:1rem; display:flex;align-items:center;} 
    .like-btn span{margin-left:5px;} 
    .like-btn.is-liked{opacity:.6;cursor:default;pointer-events:none;} 
    .site-footer{background:#f1f0ed; padding:3rem 1rem;} 
    .footer-inner{max-width:1000px; margin:0 auto; position:relative;} 
    .footer-social{display:flex; gap:3rem; justify-content:flex-end; margin-bottom:1.25rem; font-style:italic;} 
    .footer-social a{color:#133d33; text-decoration:none;} 
    .footer-social a:hover{text-decoration:underline;} 
    .footer-line{height:2px;background:#133d33;border:none;width:100%;margin:1rem auto 1.25rem;} 
    .footer-copy{text-align:center;font-size:.9rem;color:#6b7b74;} 
    @media (max-width:768px){.footer-social{justify-content:center;gap:2rem}} 
  </style> <!-- æ¨£å¼çµæŸ --> 
</head> <!-- æ–‡ä»¶é ­çµæŸ -->

<body> <!-- ä¸»é«”é–‹å§‹ -->
  <header> <!-- å›ºå®šå°è¦½åˆ— -->
    <h1>dEaR dIaRy</h1> <!-- ç¶²ç«™æ¨™é¡Œ -->
    <nav> <!-- ä¸»é¸å–® -->
      <a href="index.html">MAIN PAGE</a> <!-- å›é¦–é  -->
      <a href="about.html">ABOUT ME</a> <!-- é—œæ–¼æˆ‘ -->
      <a href="contact.html">CONTACT</a> <!-- è¯çµ¡æˆ‘ -->
    </nav>
  </header> 

  <div class="hero-gallery"> 
    <img src="images/DSC0E8628.jpg" alt="Hero image" loading="lazy"> 
  </div> 
  <div class="hero-title">Beautiful Little Things</div> 

  <div class="content-wrapper">
    <main>
      <div class="tags" aria-label="æ–‡ç« åˆ†é¡ç¯©é¸">
        <button type="button" onclick="filterTag('all')">å…¨éƒ¨</button> 
        <button type="button" onclick="filterTag('æ—…éŠ')">æ—…éŠ</button> 
        <button type="button" onclick="filterTag('æ˜Ÿç©º')">æ˜Ÿç©º</button> 
        <button type="button" onclick="filterTag('æ—¥å¸¸')">æ—¥å¸¸</button> 
        <button type="button" onclick="filterTag('æ½›æ°´')">æ½›æ°´</button>
      </div>

      <div class="posts" id="postList">
        <!-- åœ¨é€™è£¡åˆ—å‡ºæ‰€æœ‰æ–‡ç« å¡ç‰‡ -->
        <a href="2023å¹´6æœˆ25æ—¥.html" class="card">
          <img src="images/ä¹ä»½.jpg" alt="ï½œä¹ä»½ï½œ">
          <div class="card-content">
            <h2>ï½œä¹ä»½ï½œ</h2>
            <div class="date">2023å¹´6æœˆ25æ—¥</div>
            <p>æ”¶å‡å‰ä¸€è¡ğŸ’ƒğŸ•ºğŸ»/ä¾å±±å‚æµ·è¶…å¼·å¤–æ™¯â›°ï¸ğŸ–ï¸</p>
            <div class="card-meta">
              <span id="views-0">0 views</span>
              <button class="like-btn" type="button" id="like-btn-0">
                â™¡ <span id="likes-0">0</span>
              </button>
            </div>
          </div>
        </a>
        <a href="2023å¹´7æœˆ2æ—¥.html" class="card">
          <img src="images/BLUE.jpg" alt="ï½œå°ä¸­è€å®¶ä¸‰æ—¥éŠï½œ">
          <div class="card-content">
            <h2>ï½œå°ä¸­è€å®¶ä¸‰æ—¥éŠï½œ</h2>
            <div class="date">2023å¹´7æœˆ2æ—¥</div>
            <p>LaLaportè¸©é»å°‹æ‰¾é¾è²“å¥½æœ‹å‹ï¼šé¾è²“BLUE/é²ä¾†çš„ä¸€å¤§å †ç”Ÿæ—¥ç¦®ç‰©ğŸè£æ»¿ä¸€å¡çš®ç®±ğŸ§³</p>
            <div class="card-meta">
              <span id="views-1">0 views</span>
              <button class="like-btn" type="button" id="like-btn-1">
                â™¡ <span id="likes-1">0</span>
              </button>
            </div>
          </div>
        </a>
        <a href="2023å¹´9æœˆ29æ—¥.html" class="card">
          <img src="images/æ—å£æµ·é‚Šå¤•é™½.jpg" alt="ï½œæ—å£æµ·é‚Šï½œ">
          <div class="card-content">
            <h2>ï½œæ—å£æµ·é‚Šï½œ</h2>
            <div class="date">2023å¹´9æœˆ29æ—¥</div>
            <p>æ”¾é¬†çš„æµ·å²¸ç·š/é¹¹é¹¹çš„æµ·é¢¨/æ‡·å¿µçš„é˜¿Qæ¡¶éºµ/ç¾å‘³çš„æŠ¹èŒ¶å†°æ·‡æ·‹</p>
            <div class="card-meta">
              <span id="views-2">0 views</span>
              <button class="like-btn" type="button" id="like-btn-2">
                â™¡ <span id="likes-2">0</span>
              </button>
            </div>
          </div>
        </a>
        <a href="2023å¹´11æœˆ16æ—¥.html" class="card">
          <img src="images/DSC0E8692.jpg" alt="ï½œå¼˜å‰åŸå…¬åœ’ï½œ">
          <div class="card-content">
            <h2>ï½œå¼˜å‰åŸå…¬åœ’ï½œ</h2>
            <div class="date">2023å¹´11æœˆ16æ—¥</div>
            <p>æ—…ç¨‹æœ€å¾Œä¸€å¤©ï¼Œç‚ºäº†åœ¨å‰å¾€ä»™å°æ©Ÿå ´å‰æŠ“ç·Šæ™‚é–“å‰å¾€å¼˜å‰åŸ...</p>
            <div class="card-meta">
              <span id="views-3">0 views</span>
              <button class="like-btn" type="button" id="like-btn-3">
                â™¡ <span id="likes-3">0</span>
              </button>
            </div>
          </div>
        </a>
        <a href="2023å¹´11æœˆ18æ—¥.html" class="card">
          <img src="images/è¡—è²“.jpg" alt="ï½œè¡—è²“ï½œ">
          <div class="card-content">
            <h2>ï½œè¡—è²“ï½œ</h2>
            <div class="date">2023å¹´11æœˆ18æ—¥</div>
            <p>å¥½å¹¸é‹ï¼Œä»Šå¤©é‡è¦‹ä½åœ¨æŸ¿åœ’è£¡çš„å°è²“ã€‚æ›´å¹¸é‹çš„æ˜¯èƒ½æœ‰æ©Ÿæœƒè¿…é€Ÿæ‹ä¸‹ç‰ å¯æ„›çš„èƒŒå½±ã€‚</p>
            <div class="card-meta">
              <span id="views-4">0 views</span>
              <button class="like-btn" type="button" id="like-btn-4">
                â™¡ <span id="likes-4">0</span>
              </button>
            </div>
          </div>
        </a>
        <!-- é€™è£¡å¯ä»¥ç¹¼çºŒæ·»åŠ æ›´å¤šæ–‡ç« å¡ç‰‡ -->
      </div>
    </main>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">
      <nav class="footer-social" aria-label="Social links">
        <a href="https://www.facebook.com/anastasialin528" target="_blank" rel="noopener">Facebook</a>
        <a href="https://www.instagram.com/anastasialin528/" target="_blank" rel="noopener">Instagram</a>
        <a href="https://www.pinterest.com/" target="_blank" rel="noopener">Pinterest</a>
        <a href="https://www.youtube.com/" target="_blank" rel="noopener">Youtube</a>
        <a href="https://chatgpt.com/" target="_blank" rel="noopener">ChatGPT</a>
      </nav>
      <hr class="footer-line">
      <div class="footer-copy">Â© 2025 æˆ‘çš„æ—¥è¨˜éƒ¨è½æ ¼</div>
    </div>
  </footer>

  <script>
    const API_URL = window.API_URL; // å¾ /api.js å–å¾—å…±ç”¨ GAS /exec URL
    if (!API_URL) console.error('æ‰¾ä¸åˆ° window.API_URLï¼Œè«‹ç¢ºèªå·²æ­£ç¢ºéƒ¨ç½² /api.js'); 

    const postList = document.getElementById("postList"); 

    function syncAllHearts(){ 
      posts.forEach((post, index) => { 
        const id = idFromHref(post.href); 
        const btn = document.getElementById(`like-btn-${index}`); 
        const likesSpan = document.getElementById(`likes-${index}`); 
        if (btn && likesSpan) {
          const currentLikes = parseInt(likesSpan.textContent || '0', 10); 
          renderHeart(btn, id, currentLikes, `likes-${index}`); 
        } 
      }); 
    }

    const ids = [];
    posts.forEach((post, index) => {
      const id = idFromHref(post.href); 
      ids.push(id); 
      
      const card = document.createElement("a"); 
      card.href = post.href; 
      card.className = "card"; 
      card.setAttribute("data-tag", post.tag); 
      card.innerHTML = `
        <img src="${post.img}" alt="${post.title}" loading="lazy">
        <div class="card-content">
          <h2>${post.title}</h2>
          <div class="date">${post.date}</div>
          <p>${post.excerpt}</p>
          <div class="card-meta">
            <span id="views-${index}">0 views</span>
            <button class="like-btn" type="button" id="like-btn-${index}">
              ${isLiked(id) ? 'â¤ï¸' : 'â™¡'} <span id="likes-${index}">0</span>
            </button>
          </div>
        </div>
      `;
      postList.appendChild(card); 

      document.getElementById(`like-btn-${index}`).addEventListener('click', async (e) => { 
        e.preventDefault(); e.stopPropagation();
        if (isLiked(id)) return;

        const btn = e.currentTarget; 
        const likesSpan = document.getElementById(`likes-${index}`);
        let curLikes = parseInt(likesSpan.textContent || '0', 10); 
        renderHeart(btn, id, curLikes + 1, `likes-${index}`);

        const res = await likeAPI(id); 
        if (res && res.ok) { 
          setLiked(id, true); 
          const newLikes = (res.data && res.data.likes != null) ? res.data.likes : 
                           (res.likes != null ? res.likes : (curLikes + 1)); 
          renderHeart(btn, id, newLikes, `likes-${index}`); 
        } else { 
          renderHeart(btn, id, curLikes, `likes-${index}`); 
          alert('æŒ‰è®šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
        }
      });
    });

    (async () => {
      try {
        const r = await apiPost({ action:'get', ids });
        if (r && r.ok && r.data) { 
          posts.forEach((post, index) => { 
            const id = idFromHref(post.href); 
            const datum = r.data[id] || {}; 
            const v = document.getElementById(`views-${index}`);
            const btn = document.getElementById(`like-btn-${index}`);
            const likeCount = (datum.likes ?? 0); 
            if (v) v.textContent = `${(datum.views ?? 0)} views`; 
            if (btn) renderHeart(btn, id, likeCount, `likes-${index}`); 
          });
        } else { 
          posts.forEach((post, index) => { 
            const id = idFromHref(post.href); 
            const btn = document.getElementById(`like-btn-${index}`); 
            if (btn) renderHeart(btn, id, 0, `likes-${index}`); 
          });
        }
      } catch (err) { 
        console.error('æ‰¹æ¬¡å–æ•¸å¤±æ•—ï¼š', err); 
      }
    })(); 

    function filterTag(tag){
      const cards = document.querySelectorAll('.card'); 
      cards.forEach(card => {
        card.style.display = (tag==='all' || card.dataset.tag===tag) ? 'inline-block' : 'none';
      });
    }
  </script>
</body>
</html>
