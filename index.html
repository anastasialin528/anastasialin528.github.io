<!DOCTYPE html> <!-- HTML5 文件宣告 -->
<html lang="zh-Hant"> <!-- 頁面語系：繁體中文 -->

<head>
    <!-- 文件頭開始 -->
    <meta charset="UTF-8"> <!-- 編碼 UTF-8，避免亂碼 -->
    <meta name="viewport" content="width=device-width,initial-scale=1"> <!-- RWD 視窗設定 -->
    <title>Anastasia</title> <!-- 瀏覽器分頁標題 -->
    
    <style>
        /* ====== 全站基本樣式 ====== */
        body {
            margin: 0; /* 移除預設外距 */
            font-family: "Microsoft JhengHei", sans-serif; /* 預設字型 */
            background: #f9f9f6; /* 背景色 */
            color: #333; /* 文字色 */
        }
        
        /* ====== Header（固定在頂端） ====== */
        header {
            position: fixed; /* 固定定位 */
            top: 0;
            left: 0;
            width: 100%; /* 置頂且滿寬 */
            z-index: 1000; /* 讓 header 蓋住內容 */
            background: #212121; /* 深色底 */
            padding: 1rem 2rem; /* 內距 */
            display: flex;
            align-items: center;
            justify-content: space-between; /* 彈性置中排列 */
            box-sizing: border-box; /* 包含邊框計算 */
        }
        
        header h1 {
            margin: 0; /* 移除外距 */
            font-size: 2rem; /* 標題大小 */
            color: #fff; /* 白字 */
            white-space: nowrap; /* 不換行 */
            flex-shrink: 0; /* 不縮 */
        }
        
        nav {
            display: flex; /* 導覽橫排 */
            gap: 1.5rem; /* 選單間距 */
            margin-left: auto;
            margin-right: 1rem; /* 靠右 */
            flex-shrink: 0; /* 不縮 */
        }
        
        nav a {
            color: #fff; /* 白字 */
            text-decoration: none; /* 移除底線 */
            font-weight: bold; /* 粗體 */
            white-space: nowrap; /* 不換行 */
        }
        
        nav a:hover {
            text-decoration: underline; /* 滑過加底線 */
        }

        /* ====== Hero 區塊 ====== */
        .hero-gallery {
            display: grid; /* 用 grid 製作 hero 容器 */
            grid-template-columns: repeat(auto-fit, minmax(100%, 1fr)); /* 單張滿版 */
            grid-auto-rows: 50vh; /* 高度 50vh */
            width: 100vw; /* 滿寬 */
            margin-top: 64px; /* 騰出 header 高度 */
        }
        
        .hero-gallery img {
            width: 100%;
            height: 100%; /* 佔滿容器 */
            object-fit: cover; /* 覆蓋裁切 */
            display: block; /* 消除下方間隙 */
        }
        
        .hero-title {
            text-align: center; /* 置中 */
            padding: 2rem 1rem; /* 內距 */
            font-size: 3rem; /* 大字 */
            color: #6fb1a0; /* 主題綠 */
            font-weight: bold; /* 粗體 */
            font-family: 'Segoe Script', cursive; /* 手寫風格字型 */
        }

        /* ====== 版面容器 ====== */
        .content-wrapper {
            background: #f9f9f6; /* 背景 */
            padding: 2rem 1rem; /* 內距 */
            display: flex;
            justify-content: center; /* 內容置中 */
        }
        
        main {
            max-width: 1000px; /* 主欄最大寬度 */
            width: 100%; /* 滿主欄寬 */
        }

        /* ====== 標籤（篩選） ====== */
        .tags {
            text-align: center; /* 置中 */
            margin-bottom: 2rem; /* 與下方間距 */
        }
        
        .tags button {
            background: #fff; /* 白底 */
            border: 2px solid #6fb1a0; /* 主題綠框 */
            color: #6fb1a0; /* 字色綠 */
            padding: .5rem 1.2rem; /* 內距 */
            margin: .4rem; /* 外距 */
            border-radius: 25px; /* 膠囊圓角 */
            cursor: pointer; /* 滑鼠指標 */
            font-size: 1rem; /* 字級 */
            transition: all .3s ease; /* 動畫 */
        }

        .tags button:hover {
            background: #6fb1a0;
            color: #fff; /* 滑過反相 */
        }

        /* ====== 卡片牆（Masonry 模擬） ====== */
        .posts {
            column-count: 3; /* 三欄 */
            column-gap: 1.5rem; /* 欄間距 */
        }
        
        @media (max-width: 1024px) {
            .posts {
                column-count: 2; /* 平板二欄 */
            }
        }
        
        @media (max-width: 600px) {
            .posts {
                column-count: 1; /* 手機一欄 */
            }
        }

        /* ====== 卡片樣式 ====== */
        .card {
            background: #fff; /* 白底 */
            border-radius: 12px; /* 圓角 */
            overflow: hidden; /* 超出裁切 */
            box-shadow: 0 4px 12px rgba(0, 0, 0, .1); /* 陰影 */
            text-decoration: none; /* 連結無底線 */
            color: inherit; /* 承襲文字色 */
            transition: transform .3s ease; /* 浮起動畫 */
            display: inline-block; /* 讓 column-count 生效 */
            width: 100%; /* 滿寬 */
            margin-bottom: 1.5rem; /* 卡片間距 */
            break-inside: avoid; /* 避免跨欄截斷 */
            position: relative; /* 便於放絕對元素 */
        }
        
        .card:hover {
            transform: translateY(-5px); /* 滑過微浮起 */
        }
        
        .card img {
            width: 100%;
            height: 320px; /* 固定高 */
            object-fit: cover; /* 覆蓋裁切 */
            display: block; /* 去除縫隙 */
        }
        
        .card-content {
            padding: 1rem; /* 內距 */
        }

        .card-content h2 {
            margin: 0 0 .5rem; /* 與日期距離 */
            color: #6fb1a0; /* 標題綠 */
            font-size: 1.4rem; /* 標題大小 */
        }

        .card-content .date {
            font-size: .9rem; /* 日期小字 */
            color: #999; /* 灰字 */
            margin-bottom: .5rem; /* 與摘要距離 */
        }
        
        .card-content p {
            margin: 0; /* 移除外距 */
            line-height: 1.6; /* 行高 */
            color: #555; /* 文字色 */
        }
        
        .card-meta {
            border-top: 1px solid #ccc; /* 上方分隔線 */
            margin-top: 1rem; /* 與摘要距離 */
            padding-top: .8rem; /* 與分隔線距離 */
            padding-left: .5rem;
            padding-right: .5rem; /* 左右內距 */
            display: flex;
            justify-content: space-between;
            align-items: center; /* 兩側對齊 */
            font-size: .9rem;
            color: #999; /* 小字灰色 */
        }
        
        .like-btn {
            background: none; /* 透明底 */
            border: none; /* 無邊框 */
            color: red; /* 紅色愛心 */
            cursor: pointer; /* 游標 */
            font-size: 1rem; /* 字級 */
            display: flex;
            align-items: center;
        }

        .like-btn span {
            margin-left: 5px; /* 愛心與數字間距 */
        }

        .like-btn.is-liked {
            opacity: .6;
            cursor: default;
            pointer-events: none; /* 已按讚：半透明且不能再按 */
        }

        /* ====== 頁尾 ====== */
        .site-footer {
            background: #f1f0ed; /* 底色 */
            padding: 3rem 1rem; /* 內距 */
        }
        
        .footer-inner {
            max-width: 1000px; /* 與主欄同寬 */
            margin: 0 auto; /* 置中 */
            position: relative; /* 可放絕對元素 */
        }
        
        .footer-social {
            display: flex; /* 橫排 */
            gap: 3rem; /* 間距 */
            justify-content: flex-end; /* 置右 */
            margin-bottom: 1.25rem; /* 與下分隔線距離 */
            font-style: italic; /* 斜體風格 */
        }
        
        .footer-social a {
            color: #133d33; /* 深綠字 */
            text-decoration: none; /* 無底線 */
        }
        
        .footer-social a:hover {
            text-decoration: underline; /* 滑過加底線 */
        }

        .footer-line {
            height: 2px;
            background: #133d33;
            border: none;
            width: 100%;
            margin: 1rem auto 1.25rem; /* 分隔線 */
        }

        .footer-copy {
            text-align: center;
            font-size: .9rem;
            color: #6b7b74; /* 版權文字 */
        }
        
        @media (max-width: 768px) {
            .footer-social {
                justify-content: center;
                gap: 2rem; /* 手機置中社群連結 */
            }
        }
    </style>
</head>

<body>
    <!-- 主體開始 -->
    <header> <!-- 固定導覽列 -->
        <h1>dEaR dIaRy</h1> <!-- 網站標題 -->
        <nav> <!-- 主選單 -->
            <a href="index.html">MAIN PAGE</a> <!-- 回首頁 -->
            <a href="about.html">ABOUT ME</a> <!-- 關於我 -->
            <a href="contact.html">CONTACT</a> <!-- 聯絡我 -->
        </nav>
    </header>

    <div class="hero-gallery"> <!-- 首屏大圖容器 -->
        <img src="images/DSC0E8628.jpg" alt="Hero image" loading="lazy"> <!-- Hero 圖片 -->
    </div>
    <div class="hero-title">Beautiful Little Things</div> <!-- Hero 標語 -->

    <div class="content-wrapper"> <!-- 包住主欄做置中 -->
        <main> <!-- 主欄 -->
            <div class="tags" aria-label="文章分類篩選"> <!-- 篩選區 -->
                <button type="button" onclick="filterTag('all')">全部</button>
                <button type="button" onclick="filterTag('旅遊')">旅遊</button>
                <button type="button" onclick="filterTag('星空')">星空</button>
                <button type="button" onclick="filterTag('日常')">日常</button>
                <button type="button" onclick="filterTag('潛水')">潛水</button>
            </div>

            <div class="posts" id="postList"></div> <!-- 卡片牆容器 -->
        </main>
    </div>

    <footer class="site-footer"> <!-- 頁尾 -->
        <div class="footer-inner"> <!-- 頁尾內框 -->
            <nav class="footer-social" aria-label="Social links"> <!-- 社群連結 -->
                <a href="https://www.facebook.com/anastasialin528" target="_blank" rel="noopener">Facebook</a>
                <a href="https://www.instagram.com/anastasialin528/" target="_blank" rel="noopener">Instagram</a>
                <a href="https://www.pinterest.com/" target="_blank" rel="noopener">Pinterest</a>
                <a href="https://www.youtube.com/" target="_blank" rel="noopener">Youtube</a>
                <a href="https://chatgpt.com/" target="_blank" rel="noopener">ChatGPT</a>
            </nav>
            <hr class="footer-line"> <!-- 裝飾分隔線 -->
            <div class="footer-copy">© 2025 我的日記部落格</div> <!-- 版權文字 -->
        </div>
    </footer>

    <!-- 後端 API 與共用工具（批次取數版） -->
    <script>
        /* === 你的 GAS Web App /exec（已通過 debug 測試）=== */
        const API_URL = 'https://script.google.com/macros/s/AKfycbyTlpjl4rx60TElPIFNqnm7vNwk1GiP8M885Z_SWLsMtPgx2eCFTqA8fajErx6d9g9V/exec'; // Web App 端點
        /* === GET：給舊介面（like/unlike）或備援時使用 === */
        async function apiGet(params) {
            const url = API_URL + '?' + new URLSearchParams(params).toString(); // 串 URL 查詢參數
            const r = await fetch(url, { cache: 'no-store' }); // 取資料（不快取）
            return r.json(); // 解析 JSON
        }
        /* === POST：首頁批次取數用（一次拿多篇 views/likes）=== */
        async function apiPost(body) {
            const r = await fetch(API_URL, { method: 'POST', body: JSON.stringify(body) }); // 傳送 JSON
            return r.json(); // 解析 JSON
        }
        /* === 本機紀錄是否按過讚（跨頁共用）=== */
        const LIKE_KEY = 'blog_liked_map'; // localStorage 鍵名
        function loadLiked() {
            try {
                return JSON.parse(localStorage.getItem(LIKE_KEY) || '{}')
            } catch {
                return {}
            }
        }

        function saveLiked(m) {
            localStorage.setItem(LIKE_KEY, JSON.stringify(m));
        }

        function isLiked(id) {
            return !!loadLiked()[id];
        }

        function setLiked(id, val) {
            const m = loadLiked();
            m[id] = !!val;
            saveLiked(m);
        }

        /* === 統一渲染愛心按鈕 === */
        function renderHeart(btnEl, id, likeCount, likesSpanId) {
            const liked = isLiked(id); // 讀本機是否按過讚
            btnEl.innerHTML = `${liked ? '❤️' : '♡'} <span id="${likesSpanId}">${likeCount ?? 0}</span>`; // 內容
            btnEl.classList.toggle('is-liked', liked); // 樣式切換
            btnEl.disabled = liked; // 已按讚則停用按鈕
        }

        /* === 跨分頁同步（其他分頁按讚，這頁跟著更新圖示）=== */
        window.addEventListener('storage', (e) => {
            if (e.key !== LIKE_KEY) return; // 只處理喜歡鍵
            if (typeof syncAllHearts === 'function') syncAllHearts(); // 重新渲染愛心
        });

        /* === 從連結 href 取得文章 ID（檔名）=== */
        function idFromHref(href) {
            const last = new URL(href, location.href).pathname.split('/').pop();
            return decodeURIComponent(last || 'index.html');
        }
    </script>

    <!-- ====== 首頁卡片產生 + 批次取數 + 愛心同步 ====== -->
    <script>
        const posts = [
            {
                tag: "旅遊",
                href: "2023年6月25日.html",
                img: "images/九份.jpg",
                title: "｜九份｜",
                date: "2023年6月25日",
                excerpt: "收假前一衝💃🕺🏻/依山傍海超強外景⛰️🏖️"
            },
            {
                tag: "旅遊",
                href: "2023年7月2日.html",
                img: "images/BLUE.jpg",
                title: "｜台中老家三日遊｜",
                date: "2023年7月2日",
                excerpt: "LaLaport踩點尋找龍貓好朋友：龍貓BLUE/遲來的一大堆生日禮物🎁裝滿一卡皮箱🧳"
            },
            {
                tag: "旅遊",
                href: "2023年9月29日.html",
                img: "images/林口海邊夕陽.jpg",
                title: "｜林口海邊｜",
                date: "2023年9月29日",
                excerpt: "放鬆的海岸線/鹹鹹的海風/懷念的阿Q桶麵/美味的抹茶冰淇淋"
            },
           {
            tag: "旅遊",
            href: "2023年11月16日.html",
            img: "images/DSC0E8692.jpg",
            title: "｜弘前城公園｜",
            date: "2023年11月16日",
            excerpt: "旅程最後一天，為了在前往仙台機場前抓緊時間前往弘前城..."
        },
        {
            tag: "旅遊",
            href: "2023年11月18日.html",
            img: "images/街貓.jpg",
            title: "｜街貓｜",
            date: "2023年11月18日",
            excerpt: "好幸運，今天遇見住在柿園裡的小貓。更幸運的是能有機會迅速拍下牠可愛的背影。相機果然需要隨身攜帶，路途中總是有美好的畫面值得紀錄。"
        },
        {
            tag: "旅遊",
            href: "2023年11月19日.html",
            img: "images/楓樹.jpg",
            title: "｜毛越寺的楓樹｜",
            date: "2023年11月19日",
            excerpt: "光影從葉子上頭打下來，或穿透或產生暗部陰影的效果，加上楓葉原先漸層的色彩令人著迷。"
        },
        {
            tag: "旅遊",
            href: "2023年11月24日.html",
            img: "images/DSC0E8750.jpg",
            title: "｜弘前城植物園｜",
            date: "2023年11月24日",
            excerpt: "之於火紅的楓葉🍁其實我更愛銀杏的黃。好想讓整片銀杏佈滿底片啊～這棵在弘前城植物園超巨大的樹🌲"
        },
        {
            tag: "旅遊",
            href: "2023年11月26日.html",
            img: "images/DSC0E8282.jpg",
            title: "｜標準鏡｜",
            date: "2023年11月26日",
            excerpt: "旅行最常用的是標準鏡。小光圈拍中遠景偽廣角，小品特寫又最自然，完整保留當下的樣貌。"
        },
        {
            tag: "旅遊",
            href: "2023年11月28日.html",
            img: "images/DSC08289.jpg",
            title: "｜鳴子峽火車站｜",
            date: "2023年11月28日",
            excerpt: "11/10旅行第二天6:50左右，我們從仙台站搭乘山彥號..."
        },
        {
            tag: "星空",
            href: "2024年12月3日.html",
            img: "images/1.jpg",
            title: "｜晨曦前的星空｜",
            date: "2024年12月3日",
            excerpt: "昨天五點半起床趕航海曙光，今天更早拍到更多星星與疑似火流星..."
        },
        {
            tag: "星空",
            href: "2025年3月2日.html",
            img: "images/DSC09815.jpg",
            title: "｜溫馨的夜｜",
            date: "2025年3月2日",
            excerpt: "日落後雲隙透出上弦月與金星，紅色地平線與微笑月亮..."
        },
        {
            tag: "日常",
            href: "2024年10月23日.html",
            img: "images/聖誕樹.jpg",
            title: "｜聖誕樹｜",
            date: "2024年10月23日",
            excerpt: "多年願望：在家擺一棵會帶來幸福感的聖誕樹。"
        },
        {
            tag: "日常",
            href: "2025年3月5日.html",
            img: "images/天空大鳥.jpg",
            title: "｜美麗的天空｜",
            date: "2025年3月5日",
            excerpt: "天氣不好拍不到星，就地取材，仍能遇見上好風景。"
        },
        {
            tag: "日常",
            href: "2025年4月15日.html",
            img: "images/苔蘚.jpg",
            title: "｜四月十五日｜",
            date: "2025年4月15日",
            excerpt: "一首詩與一段自述，配色地獄後的日常療癒：新朋友苔蘚。"
        },
        {
            tag: "潛水",
            href: "2025年4月21日.html",
            img: "images/面鏡.jpg",
            title: "｜面鏡開箱｜",
            date: "2025年4月21日",
            excerpt: "週間沒時間下水，先做陸上鍛鍊與面鏡『開鏡』儀式。"
        }
        ];

        const postList = document.getElementById("postList"); // 取得卡片牆容器

       posts.forEach((post, index) => {
        const card = document.createElement("a"); // 建立 <a> 卡片
        const id = idFromHref(post.href); // 取得文章 ID（檔名）

        card.href = post.href; // 內頁連結
        card.className = "card"; // 卡片樣式
        card.setAttribute("data-tag", post.tag); // 存分類標籤供篩選
        
        card.innerHTML = `
            <img src="${post.img}" alt="${post.title}" loading="lazy"> <!-- 卡片首圖 -->
            <div class="card-content"> <!-- 文字內容 -->
                <h2>${post.title}</h2> <!-- 卡片標題 -->
                <div class="date">${post.date}</div> <!-- 日期 -->
                <p>${post.excerpt}</p> <!-- 摘要 -->
                <div class="card-meta"> <!-- 底部統計區 -->
                    <span id="views-${index}">0 views</span> <!-- 先顯示 0，稍後覆蓋 -->
                    <button class="like-btn" type="button" id="like-btn-${index}"> <!-- 愛心按鈕 -->
                        ${isLiked(id) ? '❤️' : '♡'} <span id="likes-${index}">0</span> <!-- 用本機狀態決定圖示 -->
                    </button>
                </div>
            </div>
        `;

        postList.appendChild(card); // 丟進卡片牆
    });
    </script>
</body>

</html>
