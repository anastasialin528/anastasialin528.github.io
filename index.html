<!DOCTYPE html> <!-- HTML5 æ–‡ä»¶å®£å‘Š --> <html lang="zh-Hant"> <!-- é é¢èªç³»ï¼šç¹é«”ä¸­æ–‡ --> <head> <!-- æ–‡ä»¶é ­é–‹å§‹ --> <meta charset="UTF-8"> <!-- ç·¨ç¢¼ UTF-8ï¼Œé¿å…äº‚ç¢¼ --> <meta name="viewport" content="width=device-width,initial-scale=1"> <!-- RWD è¦–çª—è¨­å®š --> <title>Anastasia</title> <!-- ç€è¦½å™¨åˆ†é æ¨™é¡Œ --> <style> /* ====== å…¨ç«™åŸºæœ¬æ¨£å¼ ====== */ body{margin:0; /* ç§»é™¤é è¨­å¤–è· */ font-family:"Microsoft JhengHei",sans-serif; /* é è¨­å­—å‹ */ background:#f9f9f6; /* èƒŒæ™¯è‰² */ color:#333} /* æ–‡å­—è‰² */ /* ====== Headerï¼ˆå›ºå®šåœ¨é ‚ç«¯ï¼‰====== */ header{position:fixed; /* å›ºå®šå®šä½ */ top:0;left:0;width:100%; /* ç½®é ‚ä¸”æ»¿å¯¬ */ z-index:1000; /* è®“ header è“‹ä½å…§å®¹ */ background:#212121; /* æ·±è‰²åº• */ padding:1rem 2rem; /* å…§è· */ display:flex;align-items:center;justify-content:space-between; /* å½ˆæ€§ç½®ä¸­æ’åˆ— */ box-sizing:border-box} /* åŒ…å«é‚Šæ¡†è¨ˆç®— */ header h1{margin:0; /* ç§»é™¤å¤–è· */ font-size:2rem; /* æ¨™é¡Œå¤§å° */ color:#fff; /* ç™½å­— */ white-space:nowrap; /* ä¸æ›è¡Œ */ flex-shrink:0} /* ä¸ç¸® */ nav{display:flex; /* å°è¦½æ©«æ’ */ gap:1.5rem; /* é¸å–®é–“è· */ margin-left:auto;margin-right:1rem; /* é å³ */ flex-shrink:0} /* ä¸ç¸® */ nav a{color:#fff; /* ç™½å­— */ text-decoration:none; /* ç§»é™¤åº•ç·š */ font-weight:bold; /* ç²—é«” */ white-space:nowrap} /* ä¸æ›è¡Œ */ nav a:hover{text-decoration:underline} /* æ»‘éåŠ åº•ç·š */ /* ====== Hero å€å¡Š ====== */ .hero-gallery{display:grid; /* ç”¨ grid è£½ä½œ hero å®¹å™¨ */ grid-template-columns:repeat(auto-fit,minmax(100%,1fr)); /* å–®å¼µæ»¿ç‰ˆ */ grid-auto-rows:50vh; /* é«˜åº¦ 50vh */ width:100vw; /* æ»¿å¯¬ */ margin-top:64px} /* é¨°å‡º header é«˜åº¦ */ .hero-gallery img{width:100%;height:100%; /* ä½”æ»¿å®¹å™¨ */ object-fit:cover; /* è¦†è“‹è£åˆ‡ */ display:block} /* æ¶ˆé™¤ä¸‹æ–¹é–“éš™ */ .hero-title{text-align:center; /* ç½®ä¸­ */ padding:2rem 1rem; /* å…§è· */ font-size:3rem; /* å¤§å­— */ color:#6fb1a0; /* ä¸»é¡Œç¶  */ font-weight:bold; /* ç²—é«” */ font-family:'Segoe Script',cursive} /* æ‰‹å¯«é¢¨æ ¼å­—å‹ */ /* ====== ç‰ˆé¢å®¹å™¨ ====== */ .content-wrapper{background:#f9f9f6; /* èƒŒæ™¯ */ padding:2rem 1rem; /* å…§è· */ display:flex;justify-content:center} /* å…§å®¹ç½®ä¸­ */ main{max-width:1000px; /* ä¸»æ¬„æœ€å¤§å¯¬åº¦ */ width:100%} /* æ»¿ä¸»æ¬„å¯¬ */ /* ====== æ¨™ç±¤ï¼ˆç¯©é¸ï¼‰ ====== */ .tags{text-align:center; /* ç½®ä¸­ */ margin-bottom:2rem} /* èˆ‡ä¸‹æ–¹é–“è· */ .tags button{background:#fff; /* ç™½åº• */ border:2px solid #6fb1a0; /* ä¸»é¡Œç¶ æ¡† */ color:#6fb1a0; /* å­—è‰²ç¶  */ padding:.5rem 1.2rem; /* å…§è· */ margin:.4rem; /* å¤–è· */ border-radius:25px; /* è† å›Šåœ“è§’ */ cursor:pointer; /* æ»‘é¼ æŒ‡æ¨™ */ font-size:1rem; /* å­—ç´š */ transition:all .3s ease} /* å‹•ç•« */ .tags button:hover{background:#6fb1a0;color:#fff} /* æ»‘éåç›¸ */ /* ====== å¡ç‰‡ç‰†ï¼ˆMasonry æ¨¡æ“¬ï¼‰ ====== */ .posts{column-count:3; /* ä¸‰æ¬„ */ column-gap:1.5rem} /* æ¬„é–“è· */ @media (max-width:1024px){.posts{column-count:2}} /* å¹³æ¿äºŒæ¬„ */ @media (max-width:600px){.posts{column-count:1}} /* æ‰‹æ©Ÿä¸€æ¬„ */ /* ====== å¡ç‰‡æ¨£å¼ ====== */ .card{background:#fff; /* ç™½åº• */ border-radius:12px; /* åœ“è§’ */ overflow:hidden; /* è¶…å‡ºè£åˆ‡ */ box-shadow:0 4px 12px rgba(0,0,0,.1); /* é™°å½± */ text-decoration:none; /* é€£çµç„¡åº•ç·š */ color:inherit; /* æ‰¿è¥²æ–‡å­—è‰² */ transition:transform .3s ease; /* æµ®èµ·å‹•ç•« */ display:inline-block; /* è®“ column-count ç”Ÿæ•ˆ */ width:100%; /* æ»¿å¯¬ */ margin-bottom:1.5rem; /* å¡ç‰‡é–“è· */ break-inside:avoid; /* é¿å…è·¨æ¬„æˆªæ–· */ position:relative} /* ä¾¿æ–¼æ”¾çµ•å°å…ƒç´  */ .card:hover{transform:translateY(-5px)} /* æ»‘éå¾®æµ®èµ· */ .card img{width:100%;height:320px; /* å›ºå®šé«˜ */ object-fit:cover; /* è¦†è“‹è£åˆ‡ */ display:block} /* å»é™¤ç¸«éš™ */ .card-content{padding:1rem} /* å…§è· */ .card-content h2{margin:0 0 .5rem; /* èˆ‡æ—¥æœŸè·é›¢ */ color:#6fb1a0; /* æ¨™é¡Œç¶  */ font-size:1.4rem} /* æ¨™é¡Œå¤§å° */ .card-content .date{font-size:.9rem; /* æ—¥æœŸå°å­— */ color:#999; /* ç°å­— */ margin-bottom:.5rem} /* èˆ‡æ‘˜è¦è·é›¢ */ .card-content p{margin:0; /* ç§»é™¤å¤–è· */ line-height:1.6; /* è¡Œé«˜ */ color:#555} /* æ–‡å­—è‰² */ .card-meta{border-top:1px solid #ccc; /* ä¸Šæ–¹åˆ†éš”ç·š */ margin-top:1rem; /* èˆ‡æ‘˜è¦è·é›¢ */ padding-top:.8rem; /* èˆ‡åˆ†éš”ç·šè·é›¢ */ padding-left:.5rem;padding-right:.5rem; /* å·¦å³å…§è· */ display:flex;justify-content:space-between;align-items:center; /* å…©å´å°é½Š */ font-size:.9rem;color:#999} /* å°å­—ç°è‰² */ .like-btn{background:none; /* é€æ˜åº• */ border:none; /* ç„¡é‚Šæ¡† */ color:red; /* ç´…è‰²æ„›å¿ƒ */ cursor:pointer; /* æ¸¸æ¨™ */ font-size:1rem; /* å­—ç´š */ display:flex;align-items:center} /* æ„›å¿ƒèˆ‡æ•¸å­—æ©«æ’ */ .like-btn span{margin-left:5px} /* æ„›å¿ƒèˆ‡æ•¸å­—é–“è· */ .like-btn.is-liked{opacity:.6;cursor:default;pointer-events:none} /* å·²æŒ‰è®šï¼šåŠé€æ˜ä¸”ä¸èƒ½å†æŒ‰ */ /* ====== é å°¾ ====== */ .site-footer{background:#f1f0ed; /* åº•è‰² */ padding:3rem 1rem} /* å…§è· */ .footer-inner{max-width:1000px; /* èˆ‡ä¸»æ¬„åŒå¯¬ */ margin:0 auto; /* ç½®ä¸­ */ position:relative} /* å¯æ”¾çµ•å°å…ƒç´  */ .footer-social{display:flex; /* æ©«æ’ */ gap:3rem; /* é–“è· */ justify-content:flex-end; /* ç½®å³ */ margin-bottom:1.25rem; /* èˆ‡ä¸‹åˆ†éš”ç·šè·é›¢ */ font-style:italic} /* æ–œé«”é¢¨æ ¼ */ .footer-social a{color:#133d33; /* æ·±ç¶ å­— */ text-decoration:none} /* ç„¡åº•ç·š */ .footer-social a:hover{text-decoration:underline} /* æ»‘éåŠ åº•ç·š */ .footer-line{height:2px;background:#133d33;border:none;width:100%;margin:1rem auto 1.25rem} /* åˆ†éš”ç·š */ .footer-copy{text-align:center;font-size:.9rem;color:#6b7b74} /* ç‰ˆæ¬Šæ–‡å­— */ @media (max-width:768px){.footer-social{justify-content:center;gap:2rem}} /* æ‰‹æ©Ÿç½®ä¸­ç¤¾ç¾¤é€£çµ */ </style> <!-- æ¨£å¼çµæŸ --> </head> <!-- æ–‡ä»¶é ­çµæŸ --> <body> <!-- ä¸»é«”é–‹å§‹ --> <!-- ====== Header ====== --> <header> <!-- å›ºå®šå°è¦½åˆ— --> <h1>dEaR dIaRy</h1> <!-- ç¶²ç«™æ¨™é¡Œ --> <nav> <!-- ä¸»é¸å–® --> <a href="index.html">MAIN PAGE</a> <!-- å›é¦–é  --> <a href="about.html">ABOUT ME</a> <!-- é—œæ–¼æˆ‘ --> <a href="contact.html">CONTACT</a> <!-- è¯çµ¡æˆ‘ --> </nav> </header> <!-- ====== Hero å€ ====== --> <div class="hero-gallery"> <!-- é¦–å±å¤§åœ–å®¹å™¨ --> <img src="images/DSC0E8628.jpg" alt="Hero image" loading="lazy"> <!-- Hero åœ–ç‰‡ --> </div> <div class="hero-title">Beautiful Little Things</div> <!-- Hero æ¨™èª --> <!-- ====== ä¸»å…§å®¹ ====== --> <div class="content-wrapper"> <!-- åŒ…ä½ä¸»æ¬„åšç½®ä¸­ --> <main> <!-- ä¸»æ¬„ --> <div class="tags" aria-label="æ–‡ç« åˆ†é¡ç¯©é¸"> <!-- ç¯©é¸å€ --> <button type="button" onclick="filterTag('all')">å…¨éƒ¨</button> <!-- å…¨éƒ¨æŒ‰éˆ• --> <button type="button" onclick="filterTag('æ—…éŠ')">æ—…éŠ</button> <!-- æ—…éŠæŒ‰éˆ• --> <button type="button" onclick="filterTag('æ˜Ÿç©º')">æ˜Ÿç©º</button> <!-- æ˜Ÿç©ºæŒ‰éˆ• --> <button type="button" onclick="filterTag('æ—¥å¸¸')">æ—¥å¸¸</button> <!-- æ—¥å¸¸æŒ‰éˆ• --> <button type="button" onclick="filterTag('æ½›æ°´')">æ½›æ°´</button> <!-- æ½›æ°´æŒ‰éˆ• --> </div> <div class="posts" id="postList"></div> <!-- å¡ç‰‡ç‰†å®¹å™¨ --> </main> </div> <!-- ====== Footer ====== --> <footer class="site-footer"> <!-- é å°¾ --> <div class="footer-inner"> <!-- é å°¾å…§æ¡† --> <nav class="footer-social" aria-label="Social links"> <!-- ç¤¾ç¾¤é€£çµ --> <a href="https://www.facebook.com/anastasialin528" target="_blank" rel="noopener">Facebook</a> <!-- FB --> <a href="https://www.instagram.com/anastasialin528/" target="_blank" rel="noopener">Instagram</a> <!-- IG --> <a href="https://www.pinterest.com/" target="_blank" rel="noopener">Pinterest</a> <!-- Pinterest --> <a href="https://www.youtube.com/" target="_blank" rel="noopener">Youtube</a> <!-- YouTube --> <a href="https://chatgpt.com/" target="_blank" rel="noopener">ChatGPT</a> <!-- ChatGPT --> </nav> <hr class="footer-line"> <!-- è£é£¾åˆ†éš”ç·š --> <div class="footer-copy">Â© 2025 æˆ‘çš„æ—¥è¨˜éƒ¨è½æ ¼</div> <!-- ç‰ˆæ¬Šæ–‡å­— --> </div> </footer> <!-- ====== å¾Œç«¯ API èˆ‡å…±ç”¨å·¥å…·ï¼ˆæ‰¹æ¬¡å–æ•¸ç‰ˆï¼‰ ====== --> <script> /* === ä½ çš„ GAS Web App /execï¼ˆå·²é€šé debug æ¸¬è©¦ï¼‰=== */ const API_URL = 'https://script.google.com/macros/s/AKfycbyTlpjl4rx60TElPIFNqnm7vNwk1GiP8M885Z_SWLsMtPgx2eCFTqA8fajErx6d9g9V/exec'; // Web App ç«¯é» /* === GETï¼šçµ¦èˆŠä»‹é¢ï¼ˆlike/unlikeï¼‰æˆ–å‚™æ´æ™‚ä½¿ç”¨ === */ async function apiGet(params){ // ç”¨ GET å‘¼å«å¾Œç«¯ const url = API_URL + '?' + new URLSearchParams(params).toString(); // ä¸² URL æŸ¥è©¢åƒæ•¸ const r = await fetch(url, { cache:'no-store' }); // å–è³‡æ–™ï¼ˆä¸å¿«å–ï¼‰ return r.json(); // è§£æ JSON } /* === POSTï¼šé¦–é æ‰¹æ¬¡å–æ•¸ç”¨ï¼ˆä¸€æ¬¡æ‹¿å¤šç¯‡ views/likesï¼‰=== */ async function apiPost(body){ // ç”¨ POST å‘¼å«å¾Œç«¯ const r = await fetch(API_URL, { method:'POST', body:JSON.stringify(body) }); // å‚³é€ JSON return r.json(); // è§£æ JSON } /* === èˆŠæ¬¾ API åŒ…è£ï¼ˆä¿ç•™ç›¸å®¹æ€§ï¼‰=== */ const getStats = (id) => apiGet({ action:'get', id }); // å–®ç¯‡æŸ¥è©¢ï¼ˆå‚™æ´ç”¨ï¼‰ const likeAPI = (id) => apiGet({ action:'like', id }); // é€å‡ºæŒ‰è®šï¼ˆæ²¿ç”¨ GETï¼‰ const unlikeAPI= (id) => apiGet({ action:'unlike', id }); // å–æ¶ˆè®šï¼ˆç›®å‰æœªä½¿ç”¨ï¼‰ /* === æœ¬æ©Ÿç´€éŒ„æ˜¯å¦æŒ‰éè®šï¼ˆè·¨é å…±ç”¨ï¼‰=== */ const LIKE_KEY = 'blog_liked_map'; // localStorage éµå function loadLiked(){ try{return JSON.parse(localStorage.getItem(LIKE_KEY)||'{}')}catch{return{}} } // å–å‡º map function saveLiked(m){ localStorage.setItem(LIKE_KEY, JSON.stringify(m)); } // å­˜å…¥ map function isLiked(id){ return !!loadLiked()[id]; } // æŸ¥æŸ id æ˜¯å¦å·²æŒ‰è®š function setLiked(id,val){ const m=loadLiked(); m[id]=!!val; saveLiked(m); } // è¨­å®šæŸ id æŒ‰è®šç‹€æ…‹ /* === çµ±ä¸€æ¸²æŸ“æ„›å¿ƒæŒ‰éˆ• === */ function renderHeart(btnEl, id, likeCount, likesSpanId){ // æ¸²æŸ“æ„›å¿ƒèˆ‡æ•¸å­— const liked = isLiked(id); // è®€æœ¬åœ°æ˜¯å¦æŒ‰éè®š btnEl.innerHTML = ${liked ? 'â¤ï¸' : 'â™¡'} <span id="${likesSpanId}">${likeCount ?? 0}</span>; // å…§å®¹ btnEl.classList.toggle('is-liked', liked); // æ¨£å¼åˆ‡æ› btnEl.disabled = liked; // å·²æŒ‰è®šå‰‡åœç”¨æŒ‰éˆ• } /* === è·¨åˆ†é åŒæ­¥ï¼ˆå…¶ä»–åˆ†é æŒ‰è®šï¼Œé€™é è·Ÿè‘—æ›´æ–°åœ–ç¤ºï¼‰=== */ window.addEventListener('storage', (e) => { // ç›£è½ storage äº‹ä»¶ if (e.key !== LIKE_KEY) return; // åªè™•ç†å–œæ­¡éµ if (typeof syncAllHearts === 'function') syncAllHearts(); // é‡æ–°æ¸²æŸ“æ„›å¿ƒ }); /* === å¾é€£çµ href å–å¾—æ–‡ç«  IDï¼ˆæª”åï¼‰=== */ function idFromHref(href){ // è§£ææª”åä½œç‚ºæ–‡ç«  ID const last = new URL(href, location.href).pathname.split('/').pop(); // å–æœ€å¾Œä¸€æ®µ return decodeURIComponent(last || 'index.html'); // é‚„åŸç·¨ç¢¼ } </script> <!-- ====== é¦–é å¡ç‰‡ç”¢ç”Ÿ + æ‰¹æ¬¡å–æ•¸ + æ„›å¿ƒåŒæ­¥ ====== --> <script> /* === æ–‡ç« æ¸…å–®ï¼ˆé¦–é é¡¯ç¤ºé †åºï¼‰=== */ const posts = [ // æ¯ç­†ï¼šæ¨™ç±¤ã€å…§é ã€é¦–åœ–ã€æ¨™é¡Œã€æ—¥æœŸã€æ‘˜è¦ { tag:"æ—…éŠ", href:"2023å¹´6æœˆ25æ—¥.html", img:"images/ä¹ä»½.jpg", title:"ï½œä¹ä»½ï½œ", date:"2023å¹´6æœˆ25æ—¥", excerpt:"æ”¶å‡å‰ä¸€è¡ğŸ’ƒğŸ•ºğŸ»/ä¾å±±å‚æµ·è¶…å¼·å¤–æ™¯â›°ï¸ğŸ–ï¸" }, { tag:"æ—…éŠ", href:"2023å¹´7æœˆ2æ—¥.html", img:"images/BLUE.jpg", title:"ï½œå°ä¸­è€å®¶ä¸‰æ—¥éŠï½œ", date:"2023å¹´7æœˆ2æ—¥", excerpt:"LaLaportè¸©é»å°‹æ‰¾é¾è²“å¥½æœ‹å‹ï¼šé¾è²“BLUE/é²ä¾†çš„ä¸€å¤§å †ç”Ÿæ—¥ç¦®ç‰©ğŸè£æ»¿ä¸€å¡çš®ç®±ğŸ§³" }, { tag:"æ—…éŠ", href:"2023å¹´9æœˆ29æ—¥.html", img:"images/æ—å£æµ·é‚Šå¤•é™½.jpg", title:"ï½œæ—å£æµ·é‚Šï½œ", date:"2023å¹´9æœˆ29æ—¥", excerpt:"æ”¾é¬†çš„æµ·å²¸ç·š/é¹¹é¹¹çš„æµ·é¢¨/æ‡·å¿µçš„é˜¿Qæ¡¶éºµ/ç¾å‘³çš„æŠ¹èŒ¶å†°æ·‡æ·‹" }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ16æ—¥.html",img:"images/DSC0E8692.jpg", title:"ï½œå¼˜å‰åŸå…¬åœ’ï½œ", date:"2023å¹´11æœˆ16æ—¥",excerpt:"æ—…ç¨‹æœ€å¾Œä¸€å¤©ï¼Œç‚ºäº†åœ¨å‰å¾€ä»™å°æ©Ÿå ´å‰æŠ“ç·Šæ™‚é–“å‰å¾€å¼˜å‰åŸ..." }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ18æ—¥.html",img:"images/è¡—è²“.jpg", title:"ï½œè¡—è²“ï½œ", date:"2023å¹´11æœˆ18æ—¥",excerpt:"å¥½å¹¸é‹ï¼Œä»Šå¤©é‡è¦‹ä½åœ¨æŸ¿åœ’è£¡çš„å°è²“ã€‚æ›´å¹¸é‹çš„æ˜¯èƒ½æœ‰æ©Ÿæœƒè¿…é€Ÿæ‹ä¸‹ç‰ å¯æ„›çš„èƒŒå½±ã€‚ç›¸æ©Ÿæœç„¶éœ€è¦éš¨èº«æ”œå¸¶ï¼Œè·¯é€”ä¸­ç¸½æ˜¯æœ‰ç¾å¥½çš„ç•«é¢å€¼å¾—ç´€éŒ„ã€‚" }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ19æ—¥.html",img:"images/æ¥“æ¨¹.jpg", title:"ï½œæ¯›è¶Šå¯ºçš„æ¥“æ¨¹ï½œ", date:"2023å¹´11æœˆ19æ—¥",excerpt:"å…‰å½±å¾è‘‰å­ä¸Šé ­æ‰“ä¸‹ä¾†ï¼Œæˆ–ç©¿é€æˆ–ç”¢ç”Ÿæš—éƒ¨é™°å½±çš„æ•ˆæœï¼ŒåŠ ä¸Šæ¥“è‘‰åŸå…ˆæ¼¸å±¤çš„è‰²å½©ä»¤äººè‘—è¿·ã€‚" }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ24æ—¥.html",img:"images/DSC0E8750.jpg", title:"ï½œå¼˜å‰åŸæ¤ç‰©åœ’ï½œ", date:"2023å¹´11æœˆ24æ—¥",excerpt:"ä¹‹æ–¼ç«ç´…çš„æ¥“è‘‰ğŸå…¶å¯¦æˆ‘æ›´æ„›éŠ€æçš„é»ƒã€‚å¥½æƒ³è®“æ•´ç‰‡éŠ€æä½ˆæ»¿åº•ç‰‡å•Šï½é€™æ£µåœ¨å¼˜å‰åŸæ¤ç‰©åœ’è¶…å·¨å¤§çš„æ¨¹ğŸŒ²" }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ26æ—¥.html",img:"images/DSC0E8282.jpg", title:"ï½œæ¨™æº–é¡ï½œ", date:"2023å¹´11æœˆ26æ—¥",excerpt:"æ—…è¡Œæœ€å¸¸ç”¨çš„æ˜¯æ¨™æº–é¡ã€‚å°å…‰åœˆæ‹ä¸­é æ™¯å½å»£è§’ï¼Œå°å“ç‰¹å¯«åˆæœ€è‡ªç„¶ï¼Œå®Œæ•´ä¿ç•™ç•¶ä¸‹çš„æ¨£è²Œã€‚" }, { tag:"æ—…éŠ", href:"2023å¹´11æœˆ28æ—¥.html",img:"images/DSC08289.jpg", title:"ï½œé³´å­å³½ç«è»Šç«™ï½œ", date:"2023å¹´11æœˆ28æ—¥",excerpt:"11/10æ—…è¡Œç¬¬äºŒå¤©6:50å·¦å³ï¼Œæˆ‘å€‘å¾ä»™å°ç«™æ­ä¹˜å±±å½¥è™Ÿ..." }, { tag:"æ˜Ÿç©º", href:"2024å¹´12æœˆ3æ—¥.html", img:"images/1.jpg", title:"ï½œæ™¨æ›¦å‰çš„æ˜Ÿç©ºï½œ", date:"2024å¹´12æœˆ3æ—¥", excerpt:"æ˜¨å¤©äº”é»åŠèµ·åºŠè¶•èˆªæµ·æ›™å…‰ï¼Œä»Šå¤©æ›´æ—©æ‹åˆ°æ›´å¤šæ˜Ÿæ˜Ÿèˆ‡ç–‘ä¼¼ç«æµæ˜Ÿâ€¦" }, { tag:"æ˜Ÿç©º", href:"2025å¹´3æœˆ2æ—¥.html", img:"images/DSC09815.jpg", title:"ï½œæº«é¦¨çš„å¤œï½œ", date:"2025å¹´3æœˆ2æ—¥", excerpt:"æ—¥è½å¾Œé›²éš™é€å‡ºä¸Šå¼¦æœˆèˆ‡é‡‘æ˜Ÿï¼Œç´…è‰²åœ°å¹³ç·šèˆ‡å¾®ç¬‘æœˆäº®â€¦" }, { tag:"æ—¥å¸¸", href:"2024å¹´10æœˆ23æ—¥.html",img:"images/è–èª•æ¨¹.jpg", title:"ï½œè–èª•æ¨¹ï½œ", date:"2024å¹´10æœˆ23æ—¥",excerpt:"å¤šå¹´é¡˜æœ›ï¼šåœ¨å®¶æ“ºä¸€æ£µæœƒå¸¶ä¾†å¹¸ç¦æ„Ÿçš„è–èª•æ¨¹ã€‚" }, { tag:"æ—¥å¸¸", href:"2025å¹´3æœˆ5æ—¥.html", img:"images/å¤©ç©ºå¤§é³¥.jpg", title:"ï½œç¾éº—çš„å¤©ç©ºï½œ", date:"2025å¹´3æœˆ5æ—¥", excerpt:"å¤©æ°£ä¸å¥½æ‹ä¸åˆ°æ˜Ÿï¼Œå°±åœ°å–æï¼Œä»èƒ½é‡è¦‹ä¸Šå¥½é¢¨æ™¯ã€‚" }, { tag:"æ—¥å¸¸", href:"2025å¹´4æœˆ15æ—¥.html", img:"images/è‹”è˜š.jpg", title:"ï½œå››æœˆåäº”æ—¥ï½œ", date:"2025å¹´4æœˆ15æ—¥", excerpt:"ä¸€é¦–è©©èˆ‡ä¸€æ®µè‡ªè¿°ï¼Œé…è‰²åœ°ç„å¾Œçš„æ—¥å¸¸ç™‚ç™’ï¼šæ–°æœ‹å‹è‹”è˜šã€‚" }, { tag:"æ½›æ°´", href:"2025å¹´4æœˆ21æ—¥.html", img:"images/é¢é¡.jpg", title:"ï½œé¢é¡é–‹ç®±ï½œ", date:"2025å¹´4æœˆ21æ—¥", excerpt:"é€±é–“æ²’æ™‚é–“ä¸‹æ°´ï¼Œå…ˆåšé™¸ä¸Šé›éŠèˆ‡é¢é¡ã€é–‹é¡ã€å„€å¼ã€‚" } ]; const postList = document.getElementById("postList"); // å–å¾—å¡ç‰‡ç‰†å®¹å™¨ /* === storage äº‹ä»¶æ™‚é‡æ–°æ¸²æŸ“æ‰€æœ‰æ„›å¿ƒï¼ˆè·¨åˆ†é åŒæ­¥ï¼‰=== */ function syncAllHearts(){ // è¢« storage äº‹ä»¶å‘¼å« posts.forEach((post, index) => { // é€å¼µå¡ç‰‡ const id = idFromHref(post.href); // ç®—å‡ºæ–‡ç«  id const btn = document.getElementById(like-btn-${index}); // æ‰¾æŒ‰éˆ• const likesSpan = document.getElementById(likes-${index}); // æ‰¾æ•¸å­— if (btn && likesSpan) { // éƒ½åœ¨æ‰è™•ç† const currentLikes = parseInt(likesSpan.textContent || '0', 10); // ç¾å€¼ renderHeart(btn, id, currentLikes, likes-${index}); // ä¾ã€Œæœ¬æ©Ÿæ˜¯å¦æŒ‰éã€æ”¹å¤–è§€ } }); } /* === ç¬¬ä¸€æ­¥ï¼šå…ˆç•«å¡ç‰‡ï¼ˆç”¨æœ¬æ©Ÿ liked ç‹€æ…‹æ¸²æŸ“æ„›å¿ƒï¼‰=== */ const ids = []; // æ”¶é›†å…¨éƒ¨æ–‡ç«  idï¼ˆä¾›æ‰¹æ¬¡æŸ¥è©¢ï¼‰ posts.forEach((post, index) => { // é€ç­†è³‡æ–™å»ºç«‹å¡ç‰‡ const id = idFromHref(post.href); // å–å¾—æ–‡ç«  idï¼ˆæª”åï¼‰ ids.push(id); // æ”¶é›†åˆ°é™£åˆ— const card = document.createElement("a"); // å»ºç«‹ <a> å¡ç‰‡ card.href = post.href; // å…§é é€£çµ card.className = "card"; // å¡ç‰‡æ¨£å¼ card.setAttribute("data-tag", post.tag); // å­˜åˆ†é¡æ¨™ç±¤ä¾›ç¯©é¸ card.innerHTML = <img src="${post.img}" alt="${post.title}" loading="lazy"> <!-- å¡ç‰‡é¦–åœ– --> <div class="card-content"> <!-- æ–‡å­—å…§å®¹ --> <h2>${post.title}</h2> <!-- å¡ç‰‡æ¨™é¡Œ --> <div class="date">${post.date}</div> <!-- æ—¥æœŸ --> <p>${post.excerpt}</p> <!-- æ‘˜è¦ --> <div class="card-meta"> <!-- åº•éƒ¨çµ±è¨ˆå€ --> <span id="views-${index}">0 views</span> <!-- å…ˆé¡¯ç¤º 0ï¼Œç¨å¾Œè¦†è“‹ --> <button class="like-btn" type="button" id="like-btn-${index}"> <!-- æ„›å¿ƒæŒ‰éˆ• --> ${isLiked(id) ? 'â¤ï¸' : 'â™¡'} <span id="likes-${index}">0</span> <!-- ç”¨æœ¬æ©Ÿç‹€æ…‹æ±ºå®šåœ–ç¤º --> </button> </div> </div> ; // å¡ç‰‡ HTML çµæŸ postList.appendChild(card); // ä¸Ÿé€²å¡ç‰‡ç‰† /* ç¶å®šæ„›å¿ƒé»æ“Šï¼ˆæ¨‚è§€æ›´æ–° + GET like å‘¼å«ï¼‰ */ document.getElementById(like-btn-${index}).addEventListener('click', async (e) => { // ç›£è½é»æ“Š e.preventDefault(); e.stopPropagation(); // é˜»æ­¢é€£åˆ°å…§é  if (isLiked(id)) return; // å·²æŒ‰éç›´æ¥ç•¥é const btn = e.currentTarget; // ç›®å‰æŒ‰éˆ• const likesSpan = document.getElementById(likes-${index}); // æ•¸å­—ç¯€é» let curLikes = parseInt(likesSpan.textContent || '0', 10); // ç¾åœ¨æ•¸ renderHeart(btn, id, curLikes + 1, likes-${index}); // æ¨‚è§€ +1 ä¸¦æ”¹æˆ â¤ï¸ const res = await likeAPI(id); // å‘¼å«å¾Œç«¯ç´¯åŠ  if (res && res.ok) { // æˆåŠŸ setLiked(id, true); // è¨˜éŒ„æœ¬æ©Ÿå·²æŒ‰è®š const newLikes = (res.data && res.data.likes != null) ? res.data.likes : // å¾Œç«¯è‹¥å›åœ¨ data å…§ (res.likes != null ? res.likes : (curLikes + 1)); // æˆ–é ‚å±¤ / æˆ–æ²¿ç”¨æ¨‚è§€å€¼ renderHeart(btn, id, newLikes, likes-${index}); // ç”¨å¾Œç«¯å€¼è¦†è“‹ } else { // å¤±æ•— renderHeart(btn, id, curLikes, likes-${index}); // å¾©åŸæ•¸å­—èˆ‡å¤–è§€ alert('æŒ‰è®šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚'); // æç¤ºå¤±æ•— } }); }); /* === ç¬¬äºŒæ­¥ï¼šæ‰¹æ¬¡å‘å¾Œç«¯è¦ views/likesï¼Œå†å›å¡«åˆ°æ¯å¼µå¡ç‰‡ === */ (async () => { // ç«‹å³åŸ·è¡Œçš„ async å€å¡Š try { const r = await apiPost({ action:'get', ids }); // POST æ‰¹æ¬¡å–æ•¸ï¼ˆå¾Œç«¯å› {ok:true,data:{id:{views,likes}}}ï¼‰ if (r && r.ok && r.data) { // æœ‰è³‡æ–™ posts.forEach((post, index) => { // é€å¼µå¡ç‰‡å›å¡« const id = idFromHref(post.href); // ç®—å‡º id const datum = r.data[id] || {}; // æ‹¿åˆ°è©²ç¯‡çš„å€¼ const v = document.getElementById(views-${index}); // æ‰¾ views ç¯€é» const btn = document.getElementById(like-btn-${index}); // æ‰¾æ„›å¿ƒæŒ‰éˆ• const likeCount = (datum.likes ?? 0); // è®šæ•¸ if (v) v.textContent = ${(datum.views ?? 0)} views; // å›å¡«è§€çœ‹æ•¸ if (btn) renderHeart(btn, id, likeCount, likes-${index}); // ä¾æœ¬æ©Ÿ liked ç‹€æ…‹èˆ‡ä¼ºæœå™¨æ•¸å€¼æ¸²æŸ“ }); } else { // æ²’æ‹¿åˆ°æ‰¹æ¬¡è³‡æ–™ï¼ˆå¾Œæ´ï¼šç¶­æŒ 0ï¼Œä½†ä»æ­£ç¢ºé¡¯ç¤ºæ„›å¿ƒç‹€æ…‹ï¼‰ posts.forEach((post, index) => { // é€å¼µ const id = idFromHref(post.href); // id const btn = document.getElementById(like-btn-${index}); // æŒ‰éˆ• if (btn) renderHeart(btn, id, 0, likes-${index}); // ä»¥ 0 é¡¯ç¤º }); } } catch (err) { // ä¾‹å¤–è™•ç† console.error('æ‰¹æ¬¡å–æ•¸å¤±æ•—ï¼š', err); // å°å‡ºéŒ¯èª¤ } })(); // ç«‹å³åŸ·è¡Œ /* === ç¯©é¸ï¼šä¾ data-tag é¡¯ç¤º/éš±è— === */ function filterTag(tag){ // ç¯©é¸å‡½å¼ const cards = document.querySelectorAll('.card'); // å–å¾—æ‰€æœ‰å¡ç‰‡ cards.forEach(card => { // é€å¼µè™•ç† card.style.display = (tag==='all' || card.dataset.tag===tag) ? 'inline-block' : 'none'; // åˆ¤æ–·æ˜¯å¦é¡¯ç¤º }); } </script> </body> <!-- ä¸»é«”çµæŸ --> </html> <!-- æ–‡ä»¶çµæŸ -->
