<!DOCTYPE html> <!-- HTML5 æ–‡ä»¶å®£å‘Š -->
<html lang="zh-Hant"> <!-- é é¢èªç³»ï¼šç¹é«”ä¸­æ–‡ -->
<head> <!-- æ–‡ä»¶é ­é–‹å§‹ -->
  <meta charset="UTF-8"> <!-- é é¢ç·¨ç¢¼ UTF-8ï¼Œé¿å…äº‚ç¢¼ -->
  <meta name="viewport" content="width=device-width,initial-scale=1"> <!-- RWDï¼šå¯¬åº¦éš¨è£ç½®ã€åˆå§‹å€ç‡ 1 -->
  <title>ï½œè–èª•æ¨¹ï½œ</title> <!-- ç€è¦½å™¨åˆ†é æ¨™é¡Œ -->

  <style> /* å…§åµŒæ¨£å¼é–‹å§‹ï¼ˆç‚ºäº†ç¤ºä¾‹é›†ä¸­ï¼‰ */
    body { 
      margin:0; 
      font-family:"Microsoft JhengHei",sans-serif; 
      background:#fff; 
      color:#333; 
      line-height:1.8; 
        } /* å…¨åŸŸæ’ç‰ˆ */
    header { 
      background:#212121; 
      padding:1rem 2rem; 
      color:#fff; 
          } /* é ‚éƒ¨æ¨™é¡Œå€ */
    main { 
      max-width:800px; 
      margin:2rem auto; 
      padding:0 1rem; 
          } /* ä¸»å…§å®¹å®¹å™¨ï¼šç½®ä¸­ã€é™åˆ¶å¯¬åº¦ */
    img { 
      width:100%; 
      border-radius:8px; 
      margin:1.5rem 0; 
        } /* æ–‡ç« å…§åœ–ç‰‡æ¨£å¼ */
    h1 { 
      color:#ff6f61; 
      font-size:2rem; 
      margin-bottom:.5rem; 
        } /* å¤§æ¨™é¡Œæ¨£å¼ */
    p:empty { 
      display:block; 
      height:1rem; 
        } /* ç©ºæ®µè½ä½”ä½ï¼ˆä¿ç•™åŸæ’ç‰ˆç¯€å¥ï¼‰ */
    .date { 
      color:#999; 
      font-size:.9rem; 
      margin-bottom:1.5rem; 
        } /* æ—¥æœŸæ¨£å¼ */
    .back-link { 
      display:inline-block; 
      margin-top:2rem; 
      color:#ff6f61; 
      text-decoration:none; 
      font-weight:bold; 
      border:2px solid #ff6f61; 
      padding:.4rem 1rem; 
      border-radius:25px; 
      transition:.3s; 
      } /* è¿”å›é¦–é æŒ‰éˆ• */
    .back-link:hover { 
      background:#ff6f61;
      color:#fff; 
    } /* æ»‘éè¿”å›é¦–é æ¨£å¼ */
    .share-section { 
      text-align:center; 
      margin-top:3rem; 
    } /* åˆ†äº«å€å¡Šå¤–æ¡† */
    .line { 
      height:1px; 
      background-color:rgba(0,0,0,.2); 
      margin:1rem 0; 
      width:100%; 
    } /* åˆ†éš”ç·š */
    .share-icons { 
      display:flex; 
      justify-content:center; 
      align-items:center; 
      gap:1.5rem; 
      margin:1rem 0; 
      position:relative; 
    } /* åˆ†äº«æŒ‰éˆ•ç¾¤çµ„ */
    .icon { 
      background:none; 
      border:none; 
      font-size:1.5rem; 
      cursor:pointer; 
      text-decoration:none; 
      color:#333; 
      transition:transform .2s; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
    } /* åˆ†äº«æŒ‰éˆ•æ¨£å¼ */
    .icon:hover { 
      transform:scale(1.2); 
    } /* åˆ†äº«æŒ‰éˆ• hover å‹•ç•« */
    .facebook-icon { 
      font-size:24px; 
      font-weight:bold; 
      color:#000;
      height:40px; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
    } /* è‡ªè£½ FB å­—æ¨£ icon */
    #copy-link { 
      background:none; 
      border:none; 
      cursor:pointer; 
      padding:0; 
      width:40px; 
      height:40px; 
    } /* è¤‡è£½é€£çµæŒ‰éˆ• */
    #copy-link img { 
      width:100%; 
      height:100%; 
      object-fit:cover; 
    } /* è¤‡è£½æŒ‰éˆ•åœ–ç‰‡é‹ªæ»¿ */
    #copied-msg { 
      position:absolute; 
      top:120%; 
      font-size:.9rem; 
      color:#28a745; 
      display:none; 
      margin-top:5px; 
    } /* è¤‡è£½æˆåŠŸæç¤º */
    .stats { 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      margin-top:1rem; 
      padding-left:15px; 
      padding-right:15px; 
      width:calc(100% - 30px);
      margin-left:auto; 
      margin-right:auto; 
    } /* çµ±è¨ˆåˆ—ï¼šå·¦å³æ’ç‰ˆ */
    .like-btn { 
      background:none; 
      border:none; 
      font-size:1.2rem; 
      color:red; 
      cursor:pointer; 
      display:flex; 
      align-items:center; 
    } /* æ„›å¿ƒæŒ‰éˆ• */
    .like-btn:hover { 
      color:#e04848; 
    } /* æ„›å¿ƒ hover è‰² */
    .like-btn span { 
      margin-left:5px; 
    } /* æ„›å¿ƒèˆ‡æ•¸å­—é–“è· */
    .like-btn.is-liked { 
      opacity:.6; 
      cursor:default; 
      pointer-events:none; 
    } /* å·²æŒ‰è®šç‹€æ…‹ï¼šåŠé€æ˜ä¸”ä¸å¯é» */
  </style> <!-- å…§åµŒæ¨£å¼çµæŸ -->
</head> <!-- æ–‡ä»¶é ­çµæŸ -->

<body> <!-- ç¶²é ä¸»é«”é–‹å§‹ -->
  <header><h1>ï½œè–èª•æ¨¹ï½œ</h1></header> <!-- é é¦–ï¼šæ–‡ç« æ¨™é¡Œ -->

  <main> <!-- ä¸»å…§å®¹é–‹å§‹ -->
    <div class="date">2024å¹´10æœˆ23æ—¥</div> <!-- ç™¼ä½ˆæ—¥æœŸ -->

    <img src="images/è–èª•æ¨¹.jpg" alt="ï½œè–èª•æ¨¹ï½œ"> <!-- æ–‡ç« ä¸»åœ– -->
    <p>åœ¨æˆ‘äººç”Ÿä¸­ä¸€ç›´æ¸´æœ›çš„ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å¸Œæœ›å®¶è£¡èƒ½ç…§æˆ‘çš„å¯©ç¾å»ä½ˆç½®ã€‚</p>
    <p>å±…ä½åœ¨ä¸€å€‹èº«å¿ƒéˆéƒ½æ„Ÿåˆ°å–œæ‚…ã€æ”¾é¬†çš„ç©ºé–“ï¼Œå°æˆ‘ä¾†èªªå¯ä»¥æ„Ÿåˆ°å¹¸ç¦ã€‚</p>
    <p>å› æ­¤æˆ‘çš„å°æˆ¿é–“æŒçºŒä¸€é»ä¸€é»åœ¨é€²åŒ–ä¸­ã€‚</p>
    <p>æŒçºŒæ‰“é€ ä¸€å€‹ï¼Œå°±ç®—æ¯å¤©å·¥ä½œç–²æ†Šçš„å›åˆ°å®¶ï¼Œæ‰“é–‹é–€çš„ç¬é–“å°±èƒ½è½‰æ›å¿ƒæƒ…å¿˜å»ä¸€åˆ‡ç…©æƒ±åŠä¸æ„‰å¿«çš„ç©ºé–“ï¼Œæ˜¯æˆ‘ä¸€ç›´åœ¨åŠªåŠ›çš„äº‹ã€‚</p>
    <p>ä½†æ˜¯å…¶ä¸­æœ‰ä¸€å€‹ç‰©ä»¶è®“æˆ‘ä¸€ç›´ä»¥ä¾†éƒ½ååˆ†çŒ¶è±«è©²ä¸è©²è²·å›ä¾†ï¼Œæ“ºåœ¨å®¶ä¸­ã€‚é€™æ˜¯ä¸€å€‹å¥½ä¼¼åªæœ‰åœ¨ç‰¹å®šç¯€æ—¥æ‰é©åˆæ‹¿å‡ºä¾†ä½ˆç½®çš„ç‰©å“ï¼Œæ„Ÿè¦ºå¹³æ™‚å¾—æ”¶æ”¾åœ¨å„²è—å®¤è£¡ï¼Œä½”æ“šå®¶è£¡æœ‰é™çš„ç©ºé–“ã€‚</p>
    <p>æƒ³äº†å¥½å¹¾å¹´ï¼Œä»Šå¤©æ­£å¥½å› ç‚ºæ„Ÿå†’åœ¨å®¶ä¼‘æ¯ï¼ŒèººåºŠåˆ°ä¸­åˆçœ¼è¦‹ç‡’é€€äº†ï¼Œå†èººä¸‹å»å±è‚¡æœƒçˆ›æ‰ï¼Œé‚„æ˜¯é€¼è‡ªå·±å‡ºå»èµ°èµ°ã€‚åœ¨æ—å£ä¸‰äº•äºŒæœŸçš„HOLAçœ‹è¦‹åœ¨è²©å”®çš„ä¸€æ£µæ£µè–èª•æ¨¹ğŸ„ï¼Œåˆè®“æˆ‘å†æ¬¡æ€è€ƒé€™å€‹å•é¡Œã€Œæˆ‘åˆ°åº•è©²è²·å—ï¼Ÿã€</p>
    <p></p>
    <p>æˆ‘åœ¨åº—è£¡ä¾†å›è¸±æ­¥æ€ç´¢ï¼ŒçŒ¶è±«å†ä¸‰ã€‚</p>
    <p>æœ€å¾Œè®“æˆ‘æƒ³é€šçš„åŸå› â€¦ï¼Œæ˜¯é€™å¹¾å¹´å­¸äº†å¹¾æ¬¡ç”Ÿæ­»åˆ¥é›¢çš„åŠŸèª²ï¼Œæ¯æ¬¡æˆ‘å»çœ‹æœ›è¦ªäººçš„æ™‚å€™ï¼Œç¸½æ˜¯æ›å¿µä»–å€‘æ˜¯å¦ç„¡æ†¾äº†ï¼Œæƒ³åšçš„äº‹æƒ…éƒ½åšäº†å—ï¼Ÿ</p>
    <p>æ¯”èµ·ä¸€äº›æ›´é›£é”æˆçš„å¤¢æƒ³ï¼Œã€Œåœ¨å®¶è£¡æ“ºä¸€é¡†è–èª•æ¨¹ã€ç›¸å°å®¹æ˜“è¨±å¤šï¼Œé‚£ç‚ºä»€éº¼è¦çŒ¶è±«é€™éº¼ä¹…ï¼Ÿè€Œä¸”å¦‚æœé€™éº¼å–œæ­¡è–èª•ç¯€ï¼Œè–èª•æ¨¹ä¹Ÿå¯ä»¥ç•¶æˆæ—¥å¸¸çš„æ“ºè¨­ï¼Œä¸éœ€è¦å¹³æ™‚æ”¶åœ¨å„²è—å®¤çš„ä¸æ˜¯å—ï¼Ÿ</p>
    <p>äººç”Ÿæ˜¯æœ‰é™çš„ï¼Œèƒ½å¢é€²ç”Ÿæ´»ä¸­å¹¸ç¦æ„Ÿçš„ç‰©å“ï¼Œå°±å„˜æ—©è®“å®ƒåŠ å…¥æˆ‘å€‘çš„æ—¥å¸¸å§ã€‚</p>
    <p>äººç”Ÿå¤¢æƒ³æ¸…å–®å¾ˆå¤šï¼Œæ¯å€‹äººçš„éƒ½ä¸ä¸€æ¨£ã€‚ä»Šå¤©ï¼Œæˆ‘å®Œæˆä¸€é …äº†ã€‚</p>
    <a class="back-link" href="index.html">â† å›åˆ°é¦–é </a> <!-- å›é¦–é æŒ‰éˆ• -->

    <div class="share-section"> <!-- åˆ†äº«åŠŸèƒ½å€å¡Š -->
      <div class="line"></div> <!-- ä¸Šåˆ†éš”ç·š -->
      <div class="share-icons"> <!-- åˆ†äº«æŒ‰éˆ•åˆ— -->
        <a class="icon facebook-icon" id="fb-share" href="#" target="_blank" rel="noopener noreferrer" title="åˆ†äº«åˆ° Facebook">f</a> <!-- FB åˆ†äº« -->
        <button class="icon" id="copy-link" title="è¤‡è£½é€£çµ"> <!-- è¤‡è£½é€£çµæŒ‰éˆ• -->
          <img src="images/share.jpg" alt="è¤‡è£½é€£çµ"> <!-- è¤‡è£½åœ–ç¤º -->
        </button> <!-- è¤‡è£½é€£çµæŒ‰éˆ•çµæŸ -->
        <span id="copied-msg">Link Copied!</span> <!-- è¤‡è£½æˆåŠŸæç¤ºæ–‡å­— -->
      </div> <!-- åˆ†äº«æŒ‰éˆ•åˆ—çµæŸ -->
      <div class="line"></div> <!-- ä¸‹åˆ†éš”ç·š -->
    </div> <!-- åˆ†äº«åŠŸèƒ½å€å¡ŠçµæŸ -->

    <div class="stats"> <!-- çµ±è¨ˆåˆ—ï¼ˆè§€çœ‹æ•¸ï¼‹æŒ‰è®šï¼‰ -->
      <div class="view"><span id="post-views">0</span> views</div> <!-- è§€çœ‹æ•¸æ–‡å­—ï¼ˆç¨å¾ŒçŒå…¥æ•¸å­—ï¼‰ -->
      <div class="like"> <!-- æ„›å¿ƒå®¹å™¨ -->
        <!-- âœ¨ æ–°å¢ ARIAï¼šè¢å¹•é–±è®€å™¨å¯è®€ï¼›aria-pressed æœƒåœ¨ JS ä¸­åŒæ­¥ -->
        <button class="like-btn" id="post-like-btn" aria-label="æŒ‰è®š" aria-pressed="false">â™¡ <span id="post-likes">0</span></button>
      </div> <!-- æ„›å¿ƒå®¹å™¨çµæŸ -->
    </div> <!-- çµ±è¨ˆåˆ—çµæŸ -->
  </main> <!-- ä¸»å…§å®¹çµæŸ -->

  <script src="/api.js?v=1"></script> <!-- å…ˆè¼‰å…¥å…±ç”¨ API è¨­å®šï¼ˆæä¾› window.API_URLï¼‰ -->

  <script> /* å…§æ–‡é å°ˆç”¨è…³æœ¬ï¼šsendBeacon + è®€çµ±è¨ˆ + æ„›å¿ƒ + è£œä¸ */
    const API_URL = window.API_URL; /* å¾ api.js å–å¾—å¾Œç«¯ Web App /exec ç«¯é» */
    if (!API_URL) { /* âœ… é˜²å‘†ï¼šé¿å…å¿˜äº†å¼•ç”¨ api.js æ™‚æ•´é å£æ‰ */
      console.error('API_URL æœªè¨­å®šï¼šè«‹ç¢ºèªå·²åœ¨ </body> å‰å¼•å…¥ /api.js');
      // å¯é¸ï¼šå‹å–„æç¤º
      // alert('å¾Œç«¯è¨­å®šæœªè¼‰å…¥ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯çµ¡ç«™é•·ã€‚');
    }

    const POST_ID = decodeURIComponent(location.pathname.split('/').pop() || 'index.html'); /* ä»¥æª”åä½œç‚ºæ–‡ç«  IDï¼ˆå’Œé¦–é ä¸€è‡´ï¼‰ */

    async function apiGet(params){ /* å°å·¥å…·ï¼šç”¨ GET å‘¼å« GASï¼ˆç›¸å®¹ä½ ç¾æœ‰ä»‹é¢ï¼‰ */
      const url = API_URL + '?' + new URLSearchParams(params).toString(); /* æŠŠç‰©ä»¶è½‰æˆæŸ¥è©¢å­—ä¸² */
      const r = await fetch(url, { cache:'no-store' }); /* ç›´æ¥å–ç”¨ï¼Œä¸èµ°ç€è¦½å™¨å¿«å– */
      return r.json(); /* è§£æ JSON å›å‚³ */
    }

    const getStats = (id) => apiGet({ action:'get', id }); /* åŒ…è£ï¼šå–å¾—å–®ç¯‡çµ±è¨ˆï¼ˆviews/likesï¼‰ */
    const likeAPI  = (id) => apiGet({ action:'like', id }); /* åŒ…è£ï¼šæŒ‰è®šï¼ˆæ²¿ç”¨ GET æ¥å£ï¼‰ */

    const LIKE_KEY = 'blog_liked_map'; /* localStorage çš„éµåï¼šè¨˜éŒ„å“ªäº›æ–‡ç« å·²æŒ‰éè®š */
    function loadLiked(){ try { return JSON.parse(localStorage.getItem(LIKE_KEY) || '{}'); } catch { return {}; } } /* è®€å– liked æ˜ å°„è¡¨ */
    function saveLiked(m){ localStorage.setItem(LIKE_KEY, JSON.stringify(m)); } /* å„²å­˜ liked æ˜ å°„è¡¨ */
    function isLiked(id){ return !!loadLiked()[id]; } /* åˆ¤æ–·è©² id æ˜¯å¦å·²æŒ‰è®š */
    function setLiked(id,v){ const m = loadLiked(); m[id] = !!v; saveLiked(m); } /* è¨­å®šè©² id çš„æŒ‰è®šç‹€æ…‹ */

    function renderHeart(btnEl, id, likeCount, likesSpanId){ /* æ¸²æŸ“æ„›å¿ƒå¤–è§€èˆ‡æ•¸å­— */
      const liked = isLiked(id); /* è®€å–æœ¬æ©Ÿæ˜¯å¦å·²æŒ‰è®š */
      btnEl.innerHTML = `${liked ? 'â¤ï¸' : 'â™¡'} <span id="${likesSpanId}">${likeCount ?? 0}</span>`; /* ä¾ç‹€æ…‹é¡¯ç¤º â¤ï¸ / â™¡ */
      btnEl.classList.toggle('is-liked', liked); /* å·²æŒ‰è®šåŠ ä¸Šæ¨£å¼ */
      btnEl.disabled = liked; /* å·²æŒ‰è®šå°±é–å®šæŒ‰éˆ• */
      btnEl.setAttribute('aria-pressed', liked ? 'true' : 'false'); /* âœ… æ–°å¢ï¼šåŒæ­¥ ARIA ç‹€æ…‹ */
    }

    function reportViewWithBeacon(id){ /* ç”¨ sendBeacon å›å ±ç€è¦½ï¼ˆä¸é˜»å¡é é¢ï¼‰ */
      const payload = { action:'view', id }; /* å¾Œç«¯ POST ä»‹é¢ï¼š{action:'view', id} */
      const blob = new Blob([JSON.stringify(payload)], {type:'application/json'}); /* è½‰æˆ Blob ä¾› beacon å‚³é€ */
      const ok = navigator.sendBeacon(API_URL, blob); /* å˜—è©¦é€é sendBeacon é€å‡ºï¼ˆèƒŒæ™¯å‚³è¼¸ï¼‰ */
      if (!ok) { /* å¦‚æœç€è¦½å™¨æˆ–æƒ…å¢ƒä¸æ”¯æ´ sendBeaconï¼Œå°±æ”¹ç”¨ keepalive fetch ç•¶å¾Œæ´ */
        fetch(API_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload), keepalive:true }).catch(()=>{}); /* å¾Œæ´å‚³é€ï¼Œä¸ç†æœƒå›æ‡‰ */
      }
    }

    (function setupShare(){ /* åˆ†äº«åŠŸèƒ½åˆå§‹åŒ–ï¼ˆFB é€£çµã€è¤‡è£½ç¶²å€ï¼‰ */
      const fbA = document.getElementById('fb-share'); /* å–å¾— FB åˆ†äº«å…ƒç´  */
      if (fbA) fbA.href = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(location.href); /* è¨­å®šåˆ†äº« URL */
      const copyBtn = document.getElementById('copy-link'); /* å–å¾—è¤‡è£½æŒ‰éˆ• */
      if (copyBtn){ /* è‹¥å­˜åœ¨å‰‡ç¶å®šäº‹ä»¶ */
        copyBtn.addEventListener('click', () => { /* ç›£è½é»æ“Šè¤‡è£½ */
          navigator.clipboard.writeText(location.href).then(()=>{ /* ä½¿ç”¨å‰ªè²¼ç°¿ API */
            const msg = document.getElementById('copied-msg'); /* å–å¾—æç¤ºæ–‡å­— */
            if (!msg) return; /* æ²’æœ‰å…ƒç´ ç›´æ¥è¿”å› */
            msg.style.display = 'inline'; /* é¡¯ç¤ºã€Œå·²è¤‡è£½ã€ */
            setTimeout(()=>{ msg.style.display = 'none'; }, 2000); /* 2 ç§’å¾Œéš±è— */
          });
        });
      }
    })(); /* ç«‹åˆ»åŸ·è¡Œåˆ†äº«åˆå§‹åŒ– */

    (async () => { /* ä¸»æµç¨‹ï¼ˆç«‹å³åŸ·è¡Œçš„ async å‡½å¼ï¼‰ */

      /* âœ… æ–°å¢ï¼šSession å»é‡ï¼ˆåŒä¸€åˆ†é /é‡æ•´åœ¨ä¸€å®šæ™‚é–“å…§åªè¨˜ä¸€æ¬¡ viewï¼‰ */
      const VIEW_KEY = `viewed:${POST_ID}`;                 /* sessionStorage éµå */
      const expireHours = 8;                                 /* å¹¾å°æ™‚å…§è¦–ç‚ºå·²çœ‹éï¼ˆå¯è‡ªè¡Œèª¿æ•´ï¼‰ */
      const now = Date.now();                                /* ç¾åœ¨æ™‚é–“æˆ³ */
      const last = Number(sessionStorage.getItem(VIEW_KEY) || 0); /* ä¸Šæ¬¡è¨˜éŒ„æ™‚é–“ */
      const isExpired = !last || (now - last > expireHours * 3600 * 1000); /* æ˜¯å¦éæœŸ */
      if (isExpired) {
        reportViewWithBeacon(POST_ID);                       /* æœªè¨˜éŒ„æˆ–éæœŸ â†’ å›å ± view */
        sessionStorage.setItem(VIEW_KEY, String(now));       /* è¨˜ä¸‹é€™æ¬¡æ™‚é–“ */
      }

      let views = 0, likes = 0; /* é è¨­çµ±è¨ˆç‚º 0 */
      try {
        const s = await getStats(POST_ID); /* å‘å¾Œç«¯å–å¾—æ­¤ç¯‡æœ€æ–°çµ±è¨ˆ */
        views = (s && s.ok && s.views != null) ? s.views : 0; /* è§£æå¾Œç«¯å›å‚³çš„ç€è¦½æ•¸ */
        likes = (s && s.ok && s.likes != null) ? s.likes : 0; /* è§£æå¾Œç«¯å›å‚³çš„è®šæ•¸ */
      } catch(e) {
        console.warn('getStats å–å¾—çµ±è¨ˆå¤±æ•—ï¼š', e); /* å–å¾—å¤±æ•—æ™‚åœ¨ Console æç¤ºï¼Œä¸ä¸­æ–·ç•«é¢ */
      }

      const viewEl  = document.getElementById('post-views'); /* å–å¾—ç€è¦½æ•¸å…ƒç´  */
      const likesEl = document.getElementById('post-likes'); /* å–å¾—è®šæ•¸å…ƒç´  */
      const btn     = document.getElementById('post-like-btn'); /* å–å¾—æ„›å¿ƒæŒ‰éˆ• */
      if (viewEl)  viewEl.textContent = views; /* å°‡ç€è¦½æ•¸å¯«å…¥ç•«é¢ */
      if (likesEl) likesEl.textContent = likes; /* å°‡è®šæ•¸å¯«å…¥ç•«é¢ */
      if (btn)     renderHeart(btn, POST_ID, likes, 'post-likes'); /* ä¾æœ¬æ©Ÿæ˜¯å¦æŒ‰éè®šæ¸²æŸ“æ„›å¿ƒ */

      if (btn){ /* ç¶å®šæ„›å¿ƒé»æ“Šäº‹ä»¶ï¼ˆæ¨‚è§€æ›´æ–°ï¼‰ */
        btn.addEventListener('click', async (e) => { /* é»æ“Šæ„›å¿ƒ */
          e.preventDefault(); /* é˜»æ­¢é è¨­è¡Œç‚ºï¼ˆé¿å…è·³è½‰ï¼‰ */
          if (isLiked(POST_ID)) return; /* è‹¥æœ¬æ©Ÿå·²æŒ‰éè®šå°±ä¸å†é€ */

          const curLikes = parseInt(document.getElementById('post-likes')?.textContent || '0', 10); /* å–å¾—ç›®å‰ç•«é¢ä¸Šçš„è®šæ•¸ */
          renderHeart(btn, POST_ID, curLikes + 1, 'post-likes'); /* æ¨‚è§€æ›´æ–°ï¼šå…ˆ +1 ä¸¦åˆ‡æ›æˆ â¤ï¸ */

          try{
            const res = await likeAPI(POST_ID); /* å‘¼å«å¾Œç«¯ like ä»‹é¢ï¼ˆ+1ï¼‰ */
            if (res && res.ok){ /* æˆåŠŸ */
              setLiked(POST_ID, true); /* æœ¬æ©Ÿæ¨™è¨˜ï¼šæ­¤ç¯‡å·²æŒ‰è®š */
              renderHeart(btn, POST_ID, (res.likes ?? (curLikes + 1)), 'post-likes'); /* ä»¥å¾Œç«¯å›å€¼è¦†è“‹ï¼ˆæ²’æœ‰å°±æ²¿ç”¨æ¨‚è§€å€¼ï¼‰ */
            }else{ /* å¤±æ•—ï¼ˆå¾Œç«¯å› not okï¼‰ */
              renderHeart(btn, POST_ID, curLikes, 'post-likes'); /* å¾©åŸç‚ºåŸå€¼ */
              alert('æŒ‰è®šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚'); /* å‹å–„æç¤º */
            }
          }catch(err){ /* ä¾‹å¤–ï¼ˆç¶²è·¯æˆ–å…¶ä»–å•é¡Œï¼‰ */
            renderHeart(btn, POST_ID, curLikes, 'post-likes'); /* å¾©åŸç‚ºåŸå€¼ */
            alert('æŒ‰è®šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚'); /* å‹å–„æç¤º */
          }
        });
      }
    })(); /* ä¸»æµç¨‹çµæŸä¸¦ç«‹å³åŸ·è¡Œ */

    window.addEventListener('storage', () => { /* è·¨åˆ†é åŒæ­¥ï¼šåˆ¥çš„åˆ†é æŒ‰è®šï¼Œé€™é è·Ÿè‘—æ›åœ–ç¤º */
      const btn = document.getElementById('post-like-btn'); /* æŠ“æ„›å¿ƒæŒ‰éˆ• */
      const likesSpan = document.getElementById('post-likes'); /* æŠ“è®šæ•¸ */
      if (btn && likesSpan){ /* ç¢ºèªå…ƒç´ å­˜åœ¨ */
        const curLikes = parseInt(likesSpan.textContent || '0', 10); /* å–ç›®å‰ç•«é¢è®šæ•¸ */
        renderHeart(btn, POST_ID, curLikes, 'post-likes'); /* ä¾æœ¬æ©Ÿ liked ç‹€æ…‹é‡æ–°æ¸²æŸ“å¤–è§€ï¼ˆå« aria-pressedï¼‰ */
      }
    }); /* storage äº‹ä»¶ç›£è½çµæŸ */
  </script> <!-- å…§æ–‡é å°ˆç”¨è…³æœ¬çµæŸ -->
</body> <!-- ç¶²é ä¸»é«”çµæŸ -->
</html> <!-- æ–‡ä»¶çµæŸ -->
